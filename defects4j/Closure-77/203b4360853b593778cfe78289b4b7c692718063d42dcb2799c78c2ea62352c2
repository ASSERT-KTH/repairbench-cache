{
    "generation": "/** Helper to escape javascript string as well as regular expression */\nstatic String strEscape(String s, char quote,\n                        String doublequoteEscape,\n                        String singlequoteEscape,\n                        String backslashEscape,\n                        CharsetEncoder outputCharsetEncoder) {\n    StringBuilder sb = new StringBuilder(s.length() + 2);\n    sb.append(quote);\n    for (int i = 0; i < s.length(); i++) {\n        char c = s.charAt(i);\n        switch (c) {\n            case '\\n': sb.append(\"\\\\n\"); break;\n            case '\\r': sb.append(\"\\\\r\"); break;\n            case '\\t': sb.append(\"\\\\t\"); break;\n            case '\\\\': \n                // Check for \\0, \\x00, \\u0000\n                if (i + 1 < s.length()) {\n                    char next = s.charAt(i + 1);\n                    if (next == '0') {\n                        // Check for \\0\n                        if (i + 2 < s.length()) {\n                            char nextNext = s.charAt(i + 2);\n                            if (nextNext == 'x' || nextNext == 'u') {\n                                // This is not a simple \\0, it might be \\x00 or \\u0000\n                                if (nextNext == 'x') {\n                                    // Check for \\x00\n                                    if (i + 3 < s.length() && s.charAt(i + 2) == '0' && s.charAt(i + 3) == '0') {\n                                        sb.append(\"\\\\x00\");\n                                        i += 3; // Skip the next three characters\n                                        break;\n                                    }\n                                } else if (nextNext == 'u') {\n                                    // Check for \\u0000\n                                    if (i + 5 < s.length() && \n                                        s.charAt(i + 2) == '0' && s.charAt(i + 3) == '0' && \n                                        s.charAt(i + 4) == '0' && s.charAt(i + 5) == '0') {\n                                        sb.append(\"\\\\u0000\");\n                                        i += 5; // Skip the next five characters\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        sb.append(\"\\\\0\");\n                        i += 1; // Skip the next character\n                        break;\n                    }\n                }\n                sb.append(backslashEscape); break;\n            case '\\\"': sb.append(doublequoteEscape); break;\n            case '\\'': sb.append(singlequoteEscape); break;\n            case '>':                       // Break --> into --\\> or ]]> into ]]\\>\n                if (i >= 2 &&\n                    ((s.charAt(i - 1) == '-' && s.charAt(i - 2) == '-') ||\n                     (s.charAt(i - 1) == ']' && s.charAt(i - 2) == ']'))) {\n                    sb.append(\"\\\\>\");\n                } else {\n                    sb.append(c);\n                }\n                break;\n            case '<':\n                // Break </script into <\\/script\n                final String END_SCRIPT = \"/script\";\n\n                // Break <!-- into <\\!--\n                final String START_COMMENT = \"!--\";\n\n                if (s.regionMatches(true, i + 1, END_SCRIPT, 0,\n                                    END_SCRIPT.length())) {\n                    sb.append(\"<\\\\\");\n                } else if (s.regionMatches(false, i + 1, START_COMMENT, 0,\n                                           START_COMMENT.length())) {\n                    sb.append(\"<\\\\\");\n                } else {\n                    sb.append(c);\n                }\n                break;\n            default:\n                // If we're given an outputCharsetEncoder, then check if the\n                //  character can be represented in this character set.\n                if (outputCharsetEncoder != null) {\n                    if (outputCharsetEncoder.canEncode(c)) {\n                        sb.append(c);\n                    } else {\n                        // Unicode-escape the character.\n                        appendHexJavaScriptRepresentation(sb, c);\n                    }\n                } else {\n                    // No charsetEncoder provided - pass straight latin characters\n                    // through, and escape the rest.  Doing the explicit character\n                    // check is measurably faster than using the CharsetEncoder.\n                    if (c > 0x1f && c <= 0x7f) {\n                        sb.append(c);\n                    } else {\n                        // Other characters can be misinterpreted by some js parsers,\n                        // or perhaps mangled by proxies along the way,\n                        // so we play it safe and unicode escape them.\n                        appendHexJavaScriptRepresentation(sb, c);\n                    }\n                }\n        }\n    }\n    sb.append(quote);\n    return sb.toString();\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": false
}