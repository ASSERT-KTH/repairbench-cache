{
    "generation": "public void captureArgumentsFrom(Invocation invocation) {\n    // If there are no matchers, nothing to capture\n    if (matchers == null || matchers.isEmpty())\n        return;\n\n    Object[] rawArguments = invocation.getRawArguments();\n    int argCount = rawArguments.length;\n\n    // If the method uses varargs, handle them accordingly\n    if (invocation.getMethod().isVarArgs()) {\n        int matcherCount = matchers.size();\n        int regularCount = invocation.getMethod().getParameterTypes().length;\n\n        // walk through all matchers, up to last regular argument\n        int rawCount = argCount;\n        for (int i = 0; i < matcherCount; i++) {\n            Matcher m = matchers.get(i);\n            if (m instanceof CapturesArguments) {\n                // if this is the last matcher and the method is varargs,\n                // and matcher receives the vararg parameter\n                boolean isLastMatcher = i == matcherCount - 1;\n                boolean isLastRaw = i == regularCount - 1;\n                // If this matcher should capture vararg array\n                if (isLastMatcher && regularCount > 0 && isLastRaw) {\n                    // Might be less arguments than matchers - protect\n                    if (rawArguments.length > i) {\n                        Object array = rawArguments[i];\n                        // For vararg methods Java always provides an array, null or otherwise\n                        ((CapturesArguments) m).captureFrom(array);\n                    }\n                } else {\n                    // Only capture if rawArguments has that index\n                    if (rawArguments.length > i) {\n                        ((CapturesArguments) m).captureFrom(rawArguments[i]);\n                    }\n                }\n            }\n        }\n    } else {\n        // Non-varargs: just capture up to args/matchers available\n        for (int position = 0; position < matchers.size(); position++) {\n            Matcher m = matchers.get(position);\n            if (m instanceof CapturesArguments) {\n                if (rawArguments.length > position) {\n                    ((CapturesArguments) m).captureFrom(rawArguments[position]);\n                }\n            }\n        }\n    }\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": true
}