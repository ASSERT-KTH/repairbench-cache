{
    "generation": "public int read(byte[] buffer, int start, int length) throws IOException {\n    if (closed) {\n        throw new IOException(\"The stream is closed\");\n    }\n    if (inf.finished() || current == null) {\n        return -1;\n    }\n\n    // Check if all bytes of the current entry have been read\n    if (readBytesOfEntry >= current.getSize()) {\n        return -1;\n    }\n\n    if (start < 0 || length < 0 || start + length > buffer.length) {\n        throw new ArrayIndexOutOfBoundsException();\n    }\n\n    if (current.getMethod() == ZipArchiveOutputStream.STORED) {\n        int csize = (int) current.getSize();\n        int remaining = csize - readBytesOfEntry;\n        if (remaining <= 0) {\n            return -1;\n        }\n        if (offsetInBuffer >= lengthOfLastRead) {\n            offsetInBuffer = 0;\n            if ((lengthOfLastRead = in.read(buf)) == -1) {\n                throw new IOException(\"Truncated ZIP file\");\n            }\n            count(lengthOfLastRead);\n            bytesReadFromStream += lengthOfLastRead;\n        }\n        int toRead = Math.min(length, Math.min(remaining, lengthOfLastRead - offsetInBuffer));\n        System.arraycopy(buf, offsetInBuffer, buffer, start, toRead);\n        offsetInBuffer += toRead;\n        readBytesOfEntry += toRead;\n        crc.update(buffer, start, toRead);\n        if (readBytesOfEntry >= csize) {\n            return -1;\n        }\n        return toRead;\n    }\n\n    if (inf.needsInput()) {\n        if (current.getSize() != -1) {\n            int remaining = (int) (current.getSize() - readBytesOfEntry);\n            if (remaining <= 0) {\n                return -1;\n            }\n        }\n        fill();\n        if (lengthOfLastRead > 0) {\n            bytesReadFromStream += lengthOfLastRead;\n        }\n    }\n\n    try {\n        int read = inf.inflate(buffer, start, length);\n        if (read <= 0) {\n            if (inf.finished()) {\n                return -1;\n            } else {\n                throw new IOException(\"Truncated ZIP file\");\n            }\n        }\n        crc.update(buffer, start, read);\n        return read;\n    } catch (DataFormatException e) {\n        throw new ZipException(e.getMessage());\n    }\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": false
}