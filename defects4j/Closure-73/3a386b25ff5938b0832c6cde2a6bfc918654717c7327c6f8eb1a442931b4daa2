{
    "generation": "/** Helper to escape javascript string as well as regular expression */\nstatic String strEscape(String s, char quote,\n                        String doublequoteEscape,\n                        String singlequoteEscape,\n                        String backslashEscape,\n                        CharsetEncoder outputCharsetEncoder) {\n  StringBuilder sb = new StringBuilder(s.length() + 2);\n  sb.append(quote);\n  for (int i = 0; i < s.length(); i++) {\n    char c = s.charAt(i);\n    switch (c) {\n      case '\\0':\n        sb.append(\"\\\\0\");\n        break;\n      case '\\n':\n        sb.append(\"\\\\n\");\n        break;\n      case '\\r':\n        sb.append(\"\\\\r\");\n        break;\n      case '\\t':\n        sb.append(\"\\\\t\");\n        break;\n      case '\\\\':\n        sb.append(backslashEscape);\n        break;\n      case '\\\"':\n        sb.append(doublequoteEscape);\n        break;\n      case '\\'':\n        sb.append(singlequoteEscape);\n        break;\n      case '>':\n        // Break --> into --\\> or ]]> into ]]\\>\n        if (i >= 2\n            && ((s.charAt(i - 1) == '-' && s.charAt(i - 2) == '-')\n                || (s.charAt(i - 1) == ']' && s.charAt(i - 2) == ']'))) {\n          sb.append(\"\\\\>\");\n        } else {\n          sb.append(c);\n        }\n        break;\n      case '<':\n        // Break </script into <\\/script\n        final String END_SCRIPT = \"/script\";\n        // Break <!-- into <\\!--\n        final String START_COMMENT = \"!--\";\n        if (s.regionMatches(true, i + 1, END_SCRIPT, 0, END_SCRIPT.length())\n            || s.regionMatches(false, i + 1, START_COMMENT, 0, START_COMMENT.length())) {\n          sb.append(\"<\\\\\");\n        } else {\n          sb.append(c);\n        }\n        break;\n      default:\n        // Only printable ASCII range 0x20..0x7E may be emitted raw,\n        // and only if there's no encoder or the encoder can actually encode it.\n        if (c >= 0x20 && c < 0x7f\n            && (outputCharsetEncoder == null || outputCharsetEncoder.canEncode(c))) {\n          sb.append(c);\n        } else {\n          // Unicode-escape everything else.\n          appendHexJavaScriptRepresentation(sb, c);\n        }\n        break;\n    }\n  }\n  sb.append(quote);\n  return sb.toString();\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": true
}