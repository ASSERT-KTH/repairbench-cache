{
    "generation": "public static String random(int count, int start, int end, boolean letters, boolean numbers,\n                            char[] chars, Random random) {\n    if (count == 0) {\n        return \"\";\n    }\n    if (count < 0) {\n        throw new IllegalArgumentException(\"Requested random string length \" + count + \" is less than 0.\");\n    }\n    // If a chars array is provided, it must not be empty.\n    if (chars != null && chars.length == 0) {\n        throw new IllegalArgumentException(\"The chars array must not be empty\");\n    }\n    // Set the default range if both start and end are 0.\n    if (start == 0 && end == 0) {\n        if (chars != null) {\n            // When using a char array, use the entire array.\n            end = chars.length;\n        } else {\n            if (!letters && !numbers) {\n                end = Integer.MAX_VALUE;\n            } else {\n                start = ' ';\n                end = 'z' + 1;\n            }\n        }\n    }\n    int gap = end - start;\n    if (gap <= 0) {\n        throw new IllegalArgumentException(\"Parameter end (\" + end + \") must be greater than start (\" + start + \")\");\n    }\n\n    // We use 'i' to track our position in the result buffer.\n    char[] buffer = new char[count];\n    int i = 0;\n    while (i < count) {\n        char ch;\n        if (chars == null) {\n            ch = (char) (random.nextInt(gap) + start);\n        } else {\n            ch = chars[random.nextInt(gap) + start];\n        }\n        // Accept the character if it meets the requested style.\n        if ((letters && Character.isLetter(ch))\n                || (numbers && Character.isDigit(ch))\n                || (!letters && !numbers)) {\n            // Handle surrogates so that we don\u2019t break any pair.\n            if (ch >= 56320 && ch <= 57343) { // low surrogate\n                if (i == count - 1) {\n                    continue; // not enough room for a surrogate pair, so try again\n                }\n                // Prepend a matching high surrogate\n                buffer[i++] = (char) (55296 + random.nextInt(128));\n                buffer[i++] = ch;\n            } else if (ch >= 55296 && ch <= 56191) { // high surrogate (in proper sub-range)\n                if (i == count - 1) {\n                    continue; // not enough room for a surrogate pair, so try again\n                }\n                buffer[i++] = ch;\n                // Append a matching low surrogate\n                buffer[i++] = (char) (56320 + random.nextInt(128));\n            } else if (ch >= 56192 && ch <= 56319) { // private use high surrogate; skip it\n                continue;\n            } else {\n                buffer[i++] = ch;\n            }\n        }\n        // If the randomly chosen char did not meet the criteria, try again\n    }\n    return new String(buffer);\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": true
}