{
    "generation": "@Override\npublic List<Connection.KeyVal> formData() {\n    // update to only include elements currently in the form (i.e., inputs that are still attached to this form element)\n    List<Connection.KeyVal> data = new ArrayList<>();\n    // select descendant elements that have \"name\" attribute and relevant input/select/textarea types\n    Elements elements = select(\"input, textarea, select, button\");\n    for (Element el : elements) {\n        // Ensure the element is still attached to this form\n        if (!el.hasAttr(\"name\") || !el.isAncestor(this)) continue;\n        if (el.tagName().equals(\"input\")) {\n            String type = el.attr(\"type\");\n            if (\"button\".equalsIgnoreCase(type) || \"submit\".equalsIgnoreCase(type) || \"reset\".equalsIgnoreCase(type)\n                || \"image\".equalsIgnoreCase(type) || \"file\".equalsIgnoreCase(type)) {\n                // skip button types except submit with a value\n                if (!\"submit\".equalsIgnoreCase(type)) continue;\n            }\n            if (\"checkbox\".equalsIgnoreCase(type) || \"radio\".equalsIgnoreCase(type)) {\n                if (!el.hasAttr(\"checked\")) continue;\n            }\n        }\n        if (el.tagName().equals(\"select\")) {\n            Elements options = el.select(\"option[selected]\");\n            boolean set = false;\n            for (Element option : options) {\n                data.add(Connection.KeyVal.create(el.attr(\"name\"), option.val()));\n                set = true;\n            }\n            if (!set) {\n                // add first option if none selected\n                Element firstOption = el.selectFirst(\"option\");\n                if (firstOption != null)\n                    data.add(Connection.KeyVal.create(el.attr(\"name\"), firstOption.val()));\n            }\n            continue;\n        }\n        // General case: input, textarea, or button with a name attribute\n        data.add(Connection.KeyVal.create(el.attr(\"name\"), el.val()));\n    }\n    return data;\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": false,
    "test": false
}