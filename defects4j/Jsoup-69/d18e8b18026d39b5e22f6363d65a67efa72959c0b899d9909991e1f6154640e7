{
    "generation": "@Override\npublic List<Connection.KeyVal> formData() {\n    List<Connection.KeyVal> formData = new ArrayList<>();\n\n    for (Element el : this.children()) {\n        if (!el.hasAttr(\"disabled\")) {\n            if (el.tag().getName().equals(\"input\")) {\n                if (el.attr(\"type\").equals(\"radio\") || el.attr(\"type\").equals(\"checkbox\")) {\n                    if (el.hasAttr(\"checked\")) {\n                        formData.add(Connection.KeyVal.create(el.attr(\"name\"), el.val()));\n                    }\n                } else {\n                    formData.add(Connection.KeyVal.create(el.attr(\"name\"), el.val()));\n                }\n            } else if (el.tag().getName().equals(\"select\")) {\n                Elements options = el.select(\"option[selected]\");\n                boolean hasDefault = false;\n                for (Element option : options) {\n                    formData.add(Connection.KeyVal.create(el.attr(\"name\"), option.val()));\n                    hasDefault = true;\n                }\n                if (!hasDefault) {\n                    Element selectDefault = options.size() > 0 ? options.get(0) : el.select(\"option\").first();\n                    if (selectDefault != null) {\n                        formData.add(Connection.KeyVal.create(el.attr(\"name\"), selectDefault.val()));\n                    }\n                }\n            } else if (el.tag().getName().equals(\"textarea\")) {\n                formData.add(Connection.KeyVal.create(el.attr(\"name\"), el.text()));\n            }\n        }\n    }\n\n    // flatten multiple inputs of same name into one value\n    Map<String, List<String>> mergeMap = new LinkedHashMap<>();\n    for (Connection.KeyVal kv : formData) {\n        List<String> valsList = mergeMap.computeIfAbsent(kv.key(), k -> new ArrayList<>());\n        valsList.add(kv.value());\n    }\n    List<Connection.KeyVal> compressed = new ArrayList<>();\n    for (Map.Entry<String, List<String>> entry : mergeMap.entrySet()) {\n        String name = entry.getKey();\n        List<String> vals = entry.getValue();\n        if (vals.size() == 1) {\n            compressed.add(Connection.KeyVal.create(name, vals.get(0)));\n        } else {\n            compressed.add(Connection.KeyVal.create(name, vals));\n        }\n    }\n\n    return compressed;\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": false,
    "test": false
}