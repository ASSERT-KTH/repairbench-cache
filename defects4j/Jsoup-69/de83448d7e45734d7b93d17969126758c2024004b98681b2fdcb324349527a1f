{
    "generation": "public List<Connection.KeyVal> formData() {\n    ArrayList<Connection.KeyVal> data = new ArrayList<>();\n\n    // Select all descendant form control elements that have a 'name' attribute.\n    // This ensures that the method operates on the current state of the DOM\n    // and correctly reflects elements that have been added or removed.\n    Elements controls = this.select(\"input[name], textarea[name], select[name], button[name]\");\n\n    for (Element el : controls) {\n        // Skip disabled elements as they are not submitted in form data.\n        if (el.hasAttr(\"disabled\")) continue;\n\n        String name = el.attr(\"name\");\n        // Skip elements if their name is empty (although select above already requires 'name').\n        if (name.length() == 0) continue;\n\n        String tagName = el.tagName();\n        if (tagName.equals(\"input\")) {\n            String type = el.attr(\"type\");\n            if (type.equals(\"radio\") || type.equals(\"checkbox\")) {\n                // Only include checked radio buttons and checkboxes.\n                if (!el.hasAttr(\"checked\")) continue;\n            } else if (type.equals(\"file\")) {\n                // File inputs are not typically included as simple key-value pairs in formData().\n                continue;\n            } else if (type.equals(\"submit\") || type.equals(\"image\")) {\n                // For submit/image buttons, only include if they have a value (as they are usually submitted if clicked).\n                if (!el.hasAttr(\"value\")) continue;\n            }\n        } else if (tagName.equals(\"select\")) {\n            List<Element> options = el.select(\"option[selected]\");\n            boolean multiple = el.hasAttr(\"multiple\");\n            if (options.isEmpty()) {\n                // If no option is selected and it's not a multiple-select,\n                // include the value of the first option if it exists.\n                if (!multiple) {\n                    Element firstOption = el.selectFirst(\"option\");\n                    if (firstOption != null) {\n                        data.add(HttpConnection.KeyVal.create(name, firstOption.val()));\n                    }\n                }\n            } else {\n                // For selected options (multiple or single select).\n                for (Element option : options) {\n                    data.add(HttpConnection.KeyVal.create(name, option.val()));\n                }\n            }\n            continue; // Move to the next control after processing the select element.\n        }\n\n        // For other input types (text, password, hidden), textarea, and button elements,\n        // add their name and value to the form data.\n        data.add(HttpConnection.KeyVal.create(name, el.val()));\n    }\n    return data;\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": false,
    "test": false
}