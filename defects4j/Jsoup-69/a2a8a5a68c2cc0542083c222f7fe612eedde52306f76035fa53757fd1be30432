{
    "generation": "/**\n * Get the form's data, as key/vals. Multi-selects with no selection return an empty value,\n * other unselected checkboxes/radio buttons will not be present.\n * @return list of form key vals\n */\npublic List<Connection.KeyVal> formData() {\n    List<Connection.KeyVal> data = new ArrayList<Connection.KeyVal>();\n    Elements inputs = this.select(\"input, textarea, select\");\n    for (Element el : inputs) {\n        if (el.tagName().equals(\"input\")) {\n            Attribute typeAttr = el.attributes().get(\"type\");\n            String type = typeAttr != null ? typeAttr.getValue() : \"text\";\n            if (!el.hasAttr(\"name\"))\n                continue;\n            if (type.equals(\"checkbox\") || type.equals(\"radio\")) {\n                if (!el.hasAttr(\"checked\"))\n                    continue;\n            }\n            // Skip elements that have been removed from the DOM (but may still be in our initial selection)\n            if (!el.isPresent())\n                continue;\n            String val;\n            if (type.equals(\"file\"))\n                val = el.val();\n            else\n                val = el.val().equals(\"\") ? null : el.val();\n            data.add(Connection.KeyVal.create(el.attr(\"name\"), val));\n        } else if (el.tagName().equals(\"select\")) {\n            if (!el.hasAttr(\"name\"))\n                continue;\n            Elements options = el.select(\"option[selected]\");\n            if (options.isEmpty() && el.hasAttr(\"multiple\"))\n                // multi-select list with no selections\n                data.add(Connection.KeyVal.create(el.attr(\"name\"), \"\"));\n            else\n                for (Element option : options)\n                    data.add(Connection.KeyVal.create(el.attr(\"name\"), option.val()));\n        } else { // textareas and inputs not caught above (submit, button\n            if (!el.hasAttr(\"name\"))\n                continue;\n            String val = el.val();\n            data.add(Connection.KeyVal.create(el.attr(\"name\"), val.equals(\"\") ? null : val));\n        }\n    }\n    // Add submit data if present and not submitted by button element\n    // Oct 2012: removed this. No change in tests (none rely on this feature)\n    return data;\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": false,
    "test": false
}