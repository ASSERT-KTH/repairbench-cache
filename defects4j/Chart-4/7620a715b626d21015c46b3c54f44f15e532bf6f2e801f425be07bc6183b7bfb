{
    "generation": "    public Range getDataRange(ValueAxis axis) {\n\n        Range result = null;\n        List mappedDatasets = new ArrayList();\n        List includedAnnotations = new ArrayList();\n        boolean isDomainAxis = true;\n\n        // Determine if the axis is a domain or range axis\n        int domainIndex = getDomainAxisIndex(axis);\n        if (domainIndex >= 0) {\n            isDomainAxis = true;\n            mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n            if (domainIndex == 0) {\n                Iterator iterator = this.annotations.iterator();\n                while (iterator.hasNext()) {\n                    XYAnnotation annotation = (XYAnnotation) iterator.next();\n                    if (annotation instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(annotation);\n                    }\n                }\n            }\n        }\n\n        int rangeIndex = getRangeAxisIndex(axis);\n        if (rangeIndex >= 0) {\n            isDomainAxis = false;\n            mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n            if (rangeIndex == 0) {\n                Iterator iterator = this.annotations.iterator();\n                while (iterator.hasNext()) {\n                    XYAnnotation annotation = (XYAnnotation) iterator.next();\n                    if (annotation instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(annotation);\n                    }\n                }\n            }\n        }\n\n        Iterator it = mappedDatasets.iterator();\n        while (it.hasNext()) {\n            XYDataset dataset = (XYDataset) it.next();\n            if (dataset != null) {\n                XYItemRenderer renderer = getRendererForDataset(dataset);\n                if (isDomainAxis) {\n                    if (renderer != null) {\n                        result = Range.combine(result, renderer.findDomainBounds(dataset));\n                    } else {\n                        result = Range.combine(result, DatasetUtilities.findDomainBounds(dataset));\n                    }\n                } else {\n                    if (renderer != null) {\n                        result = Range.combine(result, renderer.findRangeBounds(dataset));\n                    } else {\n                        result = Range.combine(result, DatasetUtilities.findRangeBounds(dataset));\n                    }\n                }\n\n                // Safely process annotations if the renderer is not null\n                if (renderer != null) {\n                    Collection annotations = renderer.getAnnotations();\n                    Iterator annotationIter = annotations.iterator();\n                    while (annotationIter.hasNext()) {\n                        XYAnnotation annotation = (XYAnnotation) annotationIter.next();\n                        if (annotation instanceof XYAnnotationBoundsInfo) {\n                            includedAnnotations.add(annotation);\n                        }\n                    }\n                }\n            }\n        }\n\n        Iterator itAnnotations = includedAnnotations.iterator();\n        while (itAnnotations.hasNext()) {\n            XYAnnotationBoundsInfo annotation = (XYAnnotationBoundsInfo) itAnnotations.next();\n            if (annotation.getIncludeInDataBounds()) {\n                if (isDomainAxis) {\n                    result = Range.combine(result, annotation.getXRange());\n                } else {\n                    result = Range.combine(result, annotation.getYRange());\n                }\n            }\n        }\n\n        return result;\n    }",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": true
}