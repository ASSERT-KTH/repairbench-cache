{
    "generation": "public Range getDataRange(ValueAxis axis) {\n\n    Range result = null;\n    List mappedDatasets = new ArrayList();\n    List includedAnnotations = new ArrayList();\n    boolean isDomainAxis = true;\n\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(\n            getDatasetsMappedToDomainAxis(new Integer(domainIndex))\n        );\n        if (domainIndex == 0) {\n            for (Iterator it = this.annotations.iterator(); it.hasNext(); ) {\n                Object ann = it.next();\n                if (ann instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(ann);\n                }\n            }\n        }\n    }\n\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(\n            getDatasetsMappedToRangeAxis(new Integer(rangeIndex))\n        );\n        if (rangeIndex == 0) {\n            for (Iterator it = this.annotations.iterator(); it.hasNext(); ) {\n                Object ann = it.next();\n                if (ann instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(ann);\n                }\n            }\n        }\n    }\n\n    // iterate through the mapped datasets and combine their bounds\n    for (Iterator it = mappedDatasets.iterator(); it.hasNext(); ) {\n        XYDataset d = (XYDataset) it.next();\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            Range dataRange;\n            if (isDomainAxis) {\n                dataRange = (r != null\n                    ? r.findDomainBounds(d)\n                    : DatasetUtilities.findDomainBounds(d));\n            }\n            else {\n                dataRange = (r != null\n                    ? r.findRangeBounds(d)\n                    : DatasetUtilities.findRangeBounds(d));\n            }\n            result = Range.combine(result, dataRange);\n\n            // include any annotations from the renderer\n            if (r != null) {\n                Collection annots = r.getAnnotations();\n                if (annots != null) {\n                    for (Iterator ait = annots.iterator(); ait.hasNext(); ) {\n                        Object a = ait.next();\n                        if (a instanceof XYAnnotationBoundsInfo) {\n                            includedAnnotations.add(a);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    // now include any XYAnnotationBoundsInfo items (plot- or renderer-level)\n    for (Iterator it = includedAnnotations.iterator(); it.hasNext(); ) {\n        XYAnnotationBoundsInfo info = (XYAnnotationBoundsInfo) it.next();\n        if (info.getIncludeInDataBounds()) {\n            if (isDomainAxis) {\n                result = Range.combine(result, info.getXRange());\n            }\n            else {\n                result = Range.combine(result, info.getYRange());\n            }\n        }\n    }\n\n    return result;\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": true
}