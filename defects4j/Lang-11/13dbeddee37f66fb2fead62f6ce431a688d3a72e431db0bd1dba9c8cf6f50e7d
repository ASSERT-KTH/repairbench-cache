{
    "generation": "public static String random(int count, int start, int end, boolean letters, boolean numbers,\n                                char[] chars, Random random) {\n    if (count == 0) {\n        return \"\";\n    } else if (count < 0) {\n        throw new IllegalArgumentException(\"Requested random string length \" + count + \" is less than 0.\");\n    }\n    if (chars!= null && chars.length == 0) {\n        throw new IllegalArgumentException(\"The chars array must not be empty\");\n    }\n\n    if (start == 0 && end == 0) {\n        if (chars!= null) {\n            end = chars.length - 1;\n            start = 0;\n        } else {\n            if (!letters &&!numbers) {\n                end = Integer.MAX_VALUE - 1;\n                start = 0;\n            } else {\n                end = 'z';\n                start = ' ';                \n            }\n        }\n    }\n\n    // Check for valid start and end range\n    if (start < 0 || end < 0 || start > end) {\n        throw new IllegalArgumentException(\"The range between 'start' (\" + start + \") and 'end' (\" + end + \") must be a positive range.\");\n    }\n\n    char[] buffer = new char[count];\n    int gap = end - start + 1;\n\n    while (count--!= 0) {\n        char ch;\n        if (chars == null) {\n            ch = (char) (random.nextInt(gap) + start);\n        } else {\n            if (start + gap > chars.length) {\n                throw new ArrayIndexOutOfBoundsException(\"There are not \" + gap + \" characters in the set array.\");\n            }\n            ch = chars[random.nextInt(gap) + start];\n        }\n        if (letters && Character.isLetter(ch)\n                || numbers && Character.isDigit(ch)\n                ||!letters &&!numbers) {\n            if(ch >= 56320 && ch <= 57343) {\n                if(count == 0) {\n                    count++;\n                } else {\n                    // low surrogate, insert high surrogate after putting it in\n                    buffer[count] = ch;\n                    count--;\n                    buffer[count] = (char) (55296 + random.nextInt(128));\n                }\n            } else if(ch >= 55296 && ch <= 56191) {\n                if(count == 0) {\n                    count++;\n                } else {\n                    // high surrogate, insert low surrogate before putting it in\n                    buffer[count] = (char) (56320 + random.nextInt(128));\n                    count--;\n                    buffer[count] = ch;\n                }\n            } else if(ch >= 56192 && ch <= 56319) {\n                // private high surrogate, no effing clue, so skip it\n                count++;\n            } else {\n                buffer[count] = ch;\n            }\n        } else {\n            count++;\n        }\n    }\n    return new String(buffer);\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": false
}