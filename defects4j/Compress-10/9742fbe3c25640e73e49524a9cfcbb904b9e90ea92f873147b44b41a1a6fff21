{
    "generation": "/**\n * Walks through all recorded entries and adds the data available\n * from the local file header.\n *\n * <p>Also records the offsets for the data to read from the\n * entries.</p>\n */\nprivate void resolveLocalFileHeaderData(Map<ZipArchiveEntry, NameAndComment>\n                                        entriesWithoutUTF8Flag)\n    throws IOException {\n    // We must remember the central\u2010directory Unicode name/comment\n    // before we overwrite the entry's extra data (which changes its hashCode).\n    for (ZipArchiveEntry ze : entries.keySet()) {\n        OffsetEntry offsetEntry = entries.get(ze);\n        long offset = offsetEntry.headerOffset;\n\n        NameAndComment nc = entriesWithoutUTF8Flag.get(ze);\n        String origName = nc != null ? ze.getName() : null;\n\n        // seek to the file name and extra-field lengths\n        archive.seek(offset + LFH_OFFSET_FOR_FILENAME_LENGTH);\n        byte[] buf = new byte[SHORT];\n        archive.readFully(buf);\n        int fileNameLen = ZipShort.getValue(buf);\n        archive.readFully(buf);\n        int extraFieldLen = ZipShort.getValue(buf);\n\n        // skip the filename\n        int toSkip = fileNameLen;\n        while (toSkip > 0) {\n            int skipped = archive.skipBytes(toSkip);\n            if (skipped <= 0) {\n                throw new RuntimeException(\"failed to skip file name in\"\n                                           + \" local file header\");\n            }\n            toSkip -= skipped;\n        }\n\n        // read the local header extra data and overwrite the entry's extra\n        byte[] localExtraData = new byte[extraFieldLen];\n        archive.readFully(localExtraData);\n        ze.setExtra(localExtraData);\n\n        // compute where the actual file data starts\n        offsetEntry.dataOffset = offset\n            + LFH_OFFSET_FOR_FILENAME_LENGTH\n            + SHORT   // the fileNameLen field\n            + SHORT   // the extraFieldLen field\n            + fileNameLen\n            + extraFieldLen;\n\n        // if this entry had a central-directory Unicode extra field,\n        // re-apply that name/comment now\n        if (nc != null) {\n            ZipUtil.setNameAndCommentFromExtraFields(ze, nc.name, nc.comment);\n            String newName = ze.getName();\n            if (!origName.equals(newName)) {\n                nameMap.remove(origName);\n                nameMap.put(newName, ze);\n            }\n        }\n    }\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": false
}