{
    "generation": "import com.crowdin.client.core.model.EnumConverter;\nimport com.crowdin.client.core.model.EnumDeserializer;\nimport com.crowdin.client.core.model.EnumSerializer;\nimport com.crowdin.client.core.model.FileData;\nimport com.crowdin.client.core.model.FileDataDeserializer;\nimport com.crowdin.client.framework.TimestampDeserializer;\nimport com.crowdin.client.glossaries.model.Term;\nimport com.crowdin.client.glossaries.model.TermResponseObject;\nimport com.crowdin.client.glossaries.model.TermResponseObjectDeserializer;\nimport com.crowdin.client.projectsgroups.model.Project;\nimport com.crowdin.client.projectsgroups.model.ProjectFileFormatSettings;\nimport com.crowdin.client.projectsgroups.model.ProjectFileFormatSettingsDeserializer;\nimport com.crowdin.client.projectsgroups.model.ProjectResponseObject;\nimport com.crowdin.client.projectsgroups.model.ProjectResponseObjectDeserializer;\nimport com.crowdin.client.sourcefiles.model.Branch;\nimport com.crowdin.client.sourcefiles.model.BranchResponseObject;\nimport com.crowdin.client.sourcefiles.model.BranchResponseObjectDeserializer;\nimport com.crowdin.client.sourcefiles.model.Directory;\nimport com.crowdin.client.sourcefiles.model.DirectoryResponseObject;\nimport com.crowdin.client.sourcefiles.model.DirectoryResponseObjectDeserializer;\nimport com.crowdin.client.sourcefiles.model.ExportOptions;\nimport com.crowdin.client.sourcefiles.model.File;\nimport com.crowdin.client.sourcefiles.model.FileExportOptionsDeserializer;\nimport com.crowdin.client.sourcefiles.model.FileImportOptionsDeserializer;\nimport com.crowdin.client.sourcefiles.model.FileInfo;\nimport com.crowdin.client.sourcefiles.model.FileInfoDeserializer;\nimport com.crowdin.client.sourcefiles.model.FileResponseObject;\nimport com.crowdin.client.sourcefiles.model.FileResponseObjectDeserializer;\nimport com.crowdin.client.sourcefiles.model.GeneralFileExportOptions;\nimport com.crowdin.client.sourcefiles.model.ImportOptions;\nimport com.crowdin.client.sourcefiles.model.OtherFileImportOptions;\nimport com.crowdin.client.sourcefiles.model.PropertyFileExportOptions;\nimport com.crowdin.client.sourcefiles.model.XmlFileImportOptions;\nimport com.crowdin.client.sourcestrings.model.SourceString;\nimport com.crowdin.client.sourcestrings.model.SourceStringResponseObject;\nimport com.crowdin.client.sourcestrings.model.SourceStringResponseObjectDeserializer;\nimport com.crowdin.client.storage.model.Storage;\nimport com.crowdin.client.storage.model.StorageResponseObject;\nimport com.crowdin.client.storage.model.StorageResponseObjectDeserializer;\nimport com.crowdin.client.tasks.model.Task;\nimport com.crowdin.client.tasks.model.TaskResponseObject;\nimport com.crowdin.client.tasks.model.TaskResponseObjectDeserializer;\nimport com.crowdin.client.translationmemory.model.TranslationMemory;\nimport com.crowdin.client.translationmemory.model.TranslationMemoryResponseObject;\nimport com.crowdin.client.translationmemory.model.TranslationMemoryResponseObjectDeserializer;\nimport com.crowdin.client.translations.model.LanguageTranslations;\nimport com.crowdin.client.translations.model.LanguageTranslationsDeserializer;\nimport com.crowdin.client.translations.model.UploadTranslationsRequest;\nimport com.crowdin.client.translations.model.UploadTranslationsResponse;\nimport com.crowdin.client.translations.model.UploadTranslationsResponseDeserializer;\nimport com.crowdin.client.users.model.User;\nimport com.crowdin.client.users.model.UserResponseObject;\nimport com.crowdin.client.users.model.UserResponseObjectDeserializer;\nimport com.crowdin.client.webhooks.model.Webhook;\nimport com.crowdin.client.webhooks.model.WebhookResponseObject;\nimport com.crowdin.client.webhooks.model.WebhookResponseObjectDeserializer;\nimport com.fasterxml.jackson.annotation.JsonAutoDetect;\nimport com.fasterxml.jackson.annotation.JsonInclude;\nimport com.fasterxml.jackson.annotation.PropertyAccessor;\nimport com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationFeature;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\n\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.Map;\nimport java.util.TimeZone;\n\nimport com.crowdin.client.core.http.exceptions.CrowdinApiException;\nimport com.crowdin.client.core.http.exceptions.CrowdinApiExceptionDeserializer;\nimport com.crowdin.client.projectsgroups.model.*; // Import specific classes instead of wildcard\nimport com.crowdin.client.sourcefiles.model.*; // Import specific classes instead of wildcard\n\npublic class JacksonJsonTransformer implements JsonTransformer {\n\n    private final ObjectMapper objectMapper;\n    private final ObjectMapper errorObjectMapper;\n\n    public JacksonJsonTransformer() {\n        ObjectMapper cleanObjectMapper = new ObjectMapper()\n            .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        SimpleModule enumModule = new SimpleModule()\n            .addDeserializer(Enum.class, new EnumDeserializer());\n\n        SimpleModule module = new SimpleModule()\n            .addSerializer(Enum.class, new EnumSerializer())\n            .addDeserializer(Enum.class, new EnumDeserializer())\n            .addDeserializer(CrowdinApiException.class, new CrowdinApiExceptionDeserializer(cleanObjectMapper))\n            .addDeserializer(Project.class, new ProjectDeserializer(cleanObjectMapper.copy()\n                .registerModule(enumModule)))\n            .addDeserializer(FileInfo.class, new FileInfoDeserializer(cleanObjectMapper.copy()\n                .registerModule(enumModule)\n                .registerModule(new SimpleModule()\n                    .addDeserializer(ImportOptions.class, new FileImportOptionsDeserializer(cleanObjectMapper))\n                    .addDeserializer(ExportOptions.class, new FileExportOptionsDeserializer(cleanObjectMapper)))))\n            .addDeserializer(LanguageTranslations.class, new LanguageTranslationsDeserializer(cleanObjectMapper));\n        this.objectMapper = cleanObjectMapper.copy()\n                .setSerializationInclusion(JsonInclude.Include.NON_NULL)\n                // Use ISO 8601 timezone format (XXX) instead of incorrect +hh:mm\n                .setDateFormat(new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ssXXX\"))\n                .registerModule(module)\n                .setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.NONE)\n                .setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY);\n        this.errorObjectMapper = cleanObjectMapper;\n    }\n\n    @Override\n    public <T> T parse(String json, Class<T> clazz) {\n        try {\n            if (clazz == CrowdinApiException.class) {\n                return (T) errorObjectMapper.readValue(json, CrowdinApiException.class);\n            }\n            return objectMapper.readValue(json, clazz);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Override\n    public String convert(Object obj) {\n        try {\n            return objectMapper.writeValueAsString(obj);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": null,
    "test": false
}