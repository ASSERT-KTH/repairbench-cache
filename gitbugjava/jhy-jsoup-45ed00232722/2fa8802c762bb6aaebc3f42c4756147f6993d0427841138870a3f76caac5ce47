{
    "generation": "static URL encodeUrl(URL u) {\n    u = punyUrl(u);\n    try {\n        String path = u.getPath();\n        String query = u.getQuery();\n        String ref = u.getRef();\n\n        // Encode the path - encode each segment separately so \"/\" are not encoded\n        if (path != null) {\n            StringBuilder encodedPath = new StringBuilder();\n            String[] segments = path.split(\"/\", -1); // keep trailing empties\n            for (int i = 0; i < segments.length; i++) {\n                if (i > 0) encodedPath.append(\"/\");\n                // encode each segment\n                encodedPath.append(URLEncoder.encode(segments[i], \"UTF-8\")\n                                         .replace(\"+\", \"%20\")\n                                         .replace(\"%2F\", \"/\")); // don't double-encode /\n            }\n            path = encodedPath.toString();\n        }\n\n        // Encode the query\n        String encodedQuery = null;\n        if (query != null) {\n            encodedQuery = URLEncoder.encode(query, \"UTF-8\").replace(\"+\", \"%20\");\n        }\n\n        URI uri = new URI(\n                u.getProtocol(),\n                u.getUserInfo(),\n                u.getHost(),\n                u.getPort(),\n                path,\n                encodedQuery,\n                ref\n        );\n        return uri.toURL();\n    } catch (Exception e) {\n        return u;\n    }\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": null,
    "test": false
}