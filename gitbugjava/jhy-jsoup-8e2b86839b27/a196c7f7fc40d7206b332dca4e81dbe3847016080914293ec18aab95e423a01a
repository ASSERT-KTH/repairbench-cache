{
    "generation": "    private boolean isFormatAsBlock(Document.OutputSettings out) {\n        // If in outline mode, everything is formatted as a block.\n        if (out.outline()) {\n            return true;\n        }\n\n        // Special handling for TD and TH tags:\n        // They should not force block formatting if their content is effectively inline.\n        // This addresses issues like #1926 where a TD/TH containing elements styled as inline\n        // should not cause newlines around the TD/TH itself.\n        if (tag.isTd() || tag.isTh()) {\n            boolean allChildrenEffectivelyInline = true;\n            // An empty TD/TH should generally not force a block format.\n            if (childNodes.isEmpty()) {\n                return false;\n            }\n\n            for (Node child : childNodes) {\n                if (child instanceof TextNode) {\n                    // Text nodes are inline content.\n                    continue;\n                } else if (child instanceof Element) {\n                    Element childEl = (Element) child;\n                    // If a child element is inherently a block tag (e.g., <p>, <div>)\n                    if (childEl.tag().isBlock()) {\n                        // Check if it's explicitly styled as inline via a 'style' attribute.\n                        // This is a heuristic as Jsoup does not perform full CSS parsing.\n                        String style = childEl.attributes().getIgnoreCase(\"style\");\n                        if (style != null && style.contains(\"display:inline\")) {\n                            continue; // Treat this block tag as effectively inline for its parent TD/TH.\n                        }\n                        // If it's a block tag and not styled as inline, then the parent TD/TH contains block content.\n                        allChildrenEffectivelyInline = false;\n                        break;\n                    }\n                    // If not a block tag, it's an inline tag, so continue.\n                } else {\n                    // Other node types (e.g., comments, CDATA sections) are treated as non-inline content for simplicity.\n                    allChildrenEffectivelyInline = false;\n                    break;\n                }\n            }\n            if (allChildrenEffectivelyInline) {\n                return false; // TD/TH with only effectively inline content should not format as a block.\n            }\n        }\n\n        // Default behavior: determine block formatting based on the tag's inherent nature.\n        // The problematic `parent().tag().formatAsBlock()` condition has been removed.\n        return tag.formatAsBlock();\n    }",
    "exact_match": false,
    "ast_match": false,
    "compile": null,
    "test": false
}